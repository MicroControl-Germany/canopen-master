<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-62K6JPR1V6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-62K6JPR1V6');
</script>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANopen Master Protocol Stack | SDO / USDO communication</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
   DoxygenAwesomeDarkModeToggle.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="mc-awesome.css" rel="stylesheet" type="text/css"/>
<link href="mc-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="mc-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">CANopen Master Documentation</div>
   <div id="projectnumber">Version 6.06.02</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('com_example_sdo_howto.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SDO / USDO communication</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Within the CANopen CC protocol access to entries of a device <b>Object Dictionary</b> is provided by means of Service Data Objects (<a class="el" href="com__sdo__cln_8h.html#COM_SDO_CLN">SDO</a>). Within the CANopen FD protocol access is provided by means of Universal Service Data Objects (<a class="el" href="com__usdo__cln_8h.html#COM_USDO_CLN">USDO</a>).</p>
<p>For the reason of backwards compatibility and in order to keep switching between CANopen CC and CANopen FD simple it is possible to use only the <a class="el" href="com__sdo__cln_8h.html#COM_SDO_CLN">SDO API</a>. In case the protocol stack is running in CANopen FD mode the corresponding functions of the USDO module are called.</p>
<h1>API</h1>
<p>The API provides functions for read (refer to <a class="el" href="com__sdo__cln_8h.html#ad236128dad193390fd141677563e8c78">ComSdoReadObject()</a>) and write (refer to <a class="el" href="com__sdo__cln_8h.html#a6423074db7425df687b65af5a55eeb29">ComSdoWriteObject()</a>) access to the device's object dictionary. Both functions use a pointer to an array of type <a class="el" href="structCoObject__s.html">CoObject_ts</a>, which references the object dictionary entry by index and sub-index.</p>
<div class="dyncontent"> <img src="sdo-service.png" alt="" class="inline" title="SDO / USDO service"/>     </div><p>Once the data transfer has been started, a segmented (or block) transfer is handled by the protocol stack autonomously depending on the data element size. In the same way an upload or download of multiple entries is managed by the protocol stack. An active SDO/USDO communication is aborted upon two incidences:</p>
<ul>
<li>a timeout condition occurs (see <a class="el" href="com_example_sdo_howto.html#com_example_sdo_timeout">Timeout event</a>)</li>
<li>the SDO/USDO server responds with an abort message</li>
</ul>
<p>Please note that for CANopen CC only one SDO connection between a SDO server and SDO client is allowed.</p>
<h2>Marker field</h2>
<p>The field <a class="el" href="structCoObject__s.html#a28d8840165e74d58d302e96bcf968009">CoObject_ts::ubMarker</a> can be used by the application for own purposes, e.g. for implementation of a state machine. The possible application value range for the field is 0 to <a class="el" href="com__object_8h.html#a626f37efe07f938454c6ef910f64513da0fa15962137359db2fc62d41e8070001">eCOM_OBJECT_MARKER_USER_END</a>.</p>
<h2>Event handling</h2>
<p>The SDO/USDO module provides three event handlers which are called on different conditions.</p>
<div class="function" style="width:900px"> <table class="function" style="width:900px">
<tr class="head">
<td class="desc" style="width:60%">Event </td><td class="desc"><p class="starttd">calls function </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td class="entry" style="width:60%">Communication success </td><td class="desc"><p class="starttd"><a class="el" href="com__object_8h.html#a4dd28ba744c2946eeb804421ee3f49ba">ComObjectEventReady()</a> </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td class="entry" style="width:60%">Communication abort, client or server </td><td class="desc"><p class="starttd"><a class="el" href="com__object_8h.html#a4dd28ba744c2946eeb804421ee3f49ba">ComObjectEventReady()</a> </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td class="entry" style="width:60%">Communication abort, timeout </td><td class="desc"><p class="starttd"><a class="el" href="com__object_8h.html#a5fa7ac82fb8669a6669e3acd9d463294">ComObjectEventTimeout()</a> </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td class="entry" style="width:60%">Communication progress (Segmented/Block) </td><td class="desc"><p class="starttd"><a class="el" href="com__object_8h.html#ab939496ea589b2ecf47df2e4a38b10ce">ComObjectEventProgress()</a> </p>
<p class="endtd"></p>
</td></tr>
</table>
</div><p>The code located in the file <code>com_user.c</code> for these event handlers provides an example and has to be adopted to the application.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="com__object_8h.html#a4dd28ba744c2946eeb804421ee3f49ba">ComObjectEventReady</a>(uint8_t ubNetV, uint8_t ubNodeIdV, <a class="code hl_struct" href="structCoObject__s.html">CoObject_ts</a> * ptsCoObjV, uint32_t ulAbortV)</div>
<div class="line">{</div>
<div class="line">   </div>
<div class="line">   (void) ulAbortV;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (ptsCoObjV != (<a class="code hl_struct" href="structCoObject__s.html">CoObject_ts</a> *) 0L)</div>
<div class="line">   {</div>
<div class="line">      <span class="keywordflow">switch</span> (ptsCoObjV-&gt;<a class="code hl_variable" href="structCoObject__s.html#a28d8840165e74d58d302e96bcf968009">ubMarker</a>)</div>
<div class="line">      {</div>
<div class="line">         <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="com__object_8h.html#a626f37efe07f938454c6ef910f64513da2cf8da4ca51f894d5129855f87cba21b">eCOM_OBJECT_MARKER_NODE_GET_INFO</a>:</div>
<div class="line">            <a class="code hl_function" href="com__demo__app_8h.html#a8b1d262d46700b715dca3ca3dc913c2a">ComDemoAppConsoleLog</a>(ComDemoNodeInfoString(ubNetV, ubNodeIdV));</div>
<div class="line">            <a class="code hl_function" href="com__node_8h.html#ac8d4da73e5112d0fbea0b569eb80c836">ComNodeSetHbProdTime</a>(ubNetV, ubNodeIdV, 500);</div>
<div class="line">            <a class="code hl_function" href="com__nmt_8h.html#a331109f37a0a467e78982bf5e2504a26">ComNmtSetHbConsTime</a>(ubNetV, ubNodeIdV, 1000);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">         <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="com__object_8h.html#a626f37efe07f938454c6ef910f64513daffa0a936c27409df781e28fed3a0e21e">eCOM_OBJECT_MARKER_NODE_SET_HEARTBEAT</a>:</div>
<div class="line">            ComDemoNmtConfigurationDone(ubNetV, ubNodeIdV);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">         <span class="keywordflow">default</span>:</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">} </div>
<div class="ttc" id="acom__demo__app_8h_html_a8b1d262d46700b715dca3ca3dc913c2a"><div class="ttname"><a href="com__demo__app_8h.html#a8b1d262d46700b715dca3ca3dc913c2a">ComDemoAppConsoleLog</a></div><div class="ttdeci">void ComDemoAppConsoleLog(const char *szMessageV)</div></div>
<div class="ttc" id="acom__nmt_8h_html_a331109f37a0a467e78982bf5e2504a26"><div class="ttname"><a href="com__nmt_8h.html#a331109f37a0a467e78982bf5e2504a26">ComNmtSetHbConsTime</a></div><div class="ttdeci">ComStatus_tv ComNmtSetHbConsTime(uint8_t ubNetV, uint8_t ubNodeIdV, uint16_t uwTimeV)</div><div class="ttdoc">Set consumer heartbeat time.</div></div>
<div class="ttc" id="acom__node_8h_html_ac8d4da73e5112d0fbea0b569eb80c836"><div class="ttname"><a href="com__node_8h.html#ac8d4da73e5112d0fbea0b569eb80c836">ComNodeSetHbProdTime</a></div><div class="ttdeci">ComStatus_tv ComNodeSetHbProdTime(uint8_t ubNetV, uint8_t ubNodeIdV, uint16_t uwHeartbeatV)</div></div>
<div class="ttc" id="acom__object_8h_html_a4dd28ba744c2946eeb804421ee3f49ba"><div class="ttname"><a href="com__object_8h.html#a4dd28ba744c2946eeb804421ee3f49ba">ComObjectEventReady</a></div><div class="ttdeci">void ComObjectEventReady(uint8_t ubNetV, uint8_t ubNodeIdV, CoObject_ts *ptsCoObjV, uint32_t ulAbortV)</div></div>
<div class="ttc" id="acom__object_8h_html_a626f37efe07f938454c6ef910f64513da2cf8da4ca51f894d5129855f87cba21b"><div class="ttname"><a href="com__object_8h.html#a626f37efe07f938454c6ef910f64513da2cf8da4ca51f894d5129855f87cba21b">eCOM_OBJECT_MARKER_NODE_GET_INFO</a></div><div class="ttdeci">@ eCOM_OBJECT_MARKER_NODE_GET_INFO</div><div class="ttdef"><b>Definition</b> com_object.h:77</div></div>
<div class="ttc" id="acom__object_8h_html_a626f37efe07f938454c6ef910f64513daffa0a936c27409df781e28fed3a0e21e"><div class="ttname"><a href="com__object_8h.html#a626f37efe07f938454c6ef910f64513daffa0a936c27409df781e28fed3a0e21e">eCOM_OBJECT_MARKER_NODE_SET_HEARTBEAT</a></div><div class="ttdeci">@ eCOM_OBJECT_MARKER_NODE_SET_HEARTBEAT</div><div class="ttdef"><b>Definition</b> com_object.h:80</div></div>
<div class="ttc" id="astructCoObject__s_html"><div class="ttname"><a href="structCoObject__s.html">CoObject_s</a></div><div class="ttdoc">Object structure.</div><div class="ttdef"><b>Definition</b> com_object.h:122</div></div>
<div class="ttc" id="astructCoObject__s_html_a28d8840165e74d58d302e96bcf968009"><div class="ttname"><a href="structCoObject__s.html#a28d8840165e74d58d302e96bcf968009">CoObject_s::ubMarker</a></div><div class="ttdeci">uint8_t ubMarker</div><div class="ttdef"><b>Definition</b> com_object.h:131</div></div>
</div><!-- fragment --><h1><a class="anchor" id="com_example_sdo_timeout"></a>
Timeout event</h1>
<p>The communication timeout between SDO / USDO client request and SDO / USDO server response is device / application specific. The initial SDO / USDO communication timeout for the client is set to <b>50 milliseconds</b>. The connection timeout value can be changed by means of the <a class="el" href="com__sdo__cln_8h.html#a1be1ad196bdb1172e9c4b3e953738a37">ComSdoSetTimeout()</a> function.</p>
<div class="dyncontent"> <img src="sdo-service-timeout.png" alt="" class="inline" title="SDO / USDO timeout"/>     </div><p>In case of a communication timeout the protocol stack will call the <a class="el" href="com__object_8h.html#a5fa7ac82fb8669a6669e3acd9d463294">ComObjectEventTimeout()</a> handler. The code of the <a class="el" href="com__object_8h.html#a5fa7ac82fb8669a6669e3acd9d463294">ComObjectEventTimeout()</a> handler provides an example and has to be adopted to the application. It is located inside the <code>com_user.c</code> file.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="com__object_8h.html#a5fa7ac82fb8669a6669e3acd9d463294">ComObjectEventTimeout</a>(uint8_t ubNetV, uint8_t ubNodeIdV, <a class="code hl_struct" href="structCoObject__s.html">CoObject_ts</a> * ptsCoObjV)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordflow">if</span> (ubNetV == <a class="code hl_enumvalue" href="com__defs_8h.html#a9fcbaaae42ba2be384e65200b4eb98beaf76f82dfac87612621bd4bb5a7585d8a">eCOM_NET_1</a>)</div>
<div class="line">   {</div>
<div class="line">      <span class="keywordflow">if</span> (ubNodeIdV == 1)</div>
<div class="line">      {</div>
<div class="line">         <span class="keywordflow">if</span>( (ptsCoObjV-&gt;<a class="code hl_variable" href="structCoObject__s.html#a203bd511837c8272aa0da539f68cd502">uwIndex</a> == 0x2000) &amp;&amp; (ptsCoObjV-&gt;<a class="code hl_variable" href="structCoObject__s.html#a838c23ab3c05002a09fb8951588419e3">ubSubIndex</a>) == 1 )</div>
<div class="line">         {</div>
<div class="line">            <span class="comment">// time-out on this object</span></div>
<div class="line">         }</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   ComDemoNmtConfigurationDone(ubNetV, ubNodeIdV);</div>
<div class="line">}</div>
<div class="ttc" id="acom__defs_8h_html_a9fcbaaae42ba2be384e65200b4eb98beaf76f82dfac87612621bd4bb5a7585d8a"><div class="ttname"><a href="com__defs_8h.html#a9fcbaaae42ba2be384e65200b4eb98beaf76f82dfac87612621bd4bb5a7585d8a">eCOM_NET_1</a></div><div class="ttdeci">@ eCOM_NET_1</div><div class="ttdef"><b>Definition</b> com_defs.h:746</div></div>
<div class="ttc" id="acom__object_8h_html_a5fa7ac82fb8669a6669e3acd9d463294"><div class="ttname"><a href="com__object_8h.html#a5fa7ac82fb8669a6669e3acd9d463294">ComObjectEventTimeout</a></div><div class="ttdeci">void ComObjectEventTimeout(uint8_t ubNetV, uint8_t ubNodeIdV, CoObject_ts *ptsCoObjV)</div></div>
<div class="ttc" id="astructCoObject__s_html_a203bd511837c8272aa0da539f68cd502"><div class="ttname"><a href="structCoObject__s.html#a203bd511837c8272aa0da539f68cd502">CoObject_s::uwIndex</a></div><div class="ttdeci">uint16_t uwIndex</div><div class="ttdef"><b>Definition</b> com_object.h:125</div></div>
<div class="ttc" id="astructCoObject__s_html_a838c23ab3c05002a09fb8951588419e3"><div class="ttname"><a href="structCoObject__s.html#a838c23ab3c05002a09fb8951588419e3">CoObject_s::ubSubIndex</a></div><div class="ttdeci">uint8_t ubSubIndex</div><div class="ttdef"><b>Definition</b> com_object.h:128</div></div>
</div><!-- fragment --><p>In addition, the protocol stack will transmit a SDO / USDO abort message with an appropriate abort code.</p>
<h2>CANopen CC timeout</h2>
<div class="fragment"><div class="line">Time-stamp        ID  Format       DLC Data                       Comment</div>
<div class="line">------------    ----  ------       --- ------------------------   ----------------------------</div>
<div class="line">192247.15644     601  CBFF          8  40 00 10 00 00 00 00 00    Read index 1000:00h</div>
<div class="line">192247.65746     601  CBFF          8  80 00 10 00 00 00 04 05    SDO abort, timeout</div>
</div><!-- fragment --><h2>CANopen FD timeout</h2>
<div class="fragment"><div class="line">Time-stamp        ID  Format       DLC Data                       Comment</div>
<div class="line">------------    ----  ------       --- ------------------------   ----------------------------</div>
<div class="line">192573.18166     67F  FBFF          6  01 11 01 01 00 10          Read index 1000:01h</div>
<div class="line">192573.68268     67F  FBFF          7  01 7F 01 01 00 10 12       USDO abort, timeout</div>
</div><!-- fragment --><h1>Code examples</h1>
<p>Code examples for accessing entries of a device object dictionary are located in the file <code>source/application/examples-com/com_demo_sdo.c</code>.</p>
<h2>Object read operation</h2>
<p>The demo function <code>ComDemoSdoObjectRead()</code> reads data from the following object dictionary entries:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Index / Sub-Index   </th><th class="markdownTableHeadLeft">Name   </th><th class="markdownTableHeadLeft">Local variable    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">1000:00<sub>h</sub>   </td><td class="markdownTableBodyLeft">device type   </td><td class="markdownTableBodyLeft">ulIdx1000G    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">1001:00<sub>h</sub>   </td><td class="markdownTableBodyLeft">error register   </td><td class="markdownTableBodyLeft">ubIdx1001G    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">1008:00<sub>h</sub>   </td><td class="markdownTableBodyLeft">manufacturer device name   </td><td class="markdownTableBodyLeft">szIdx1008G[]    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">1017:00<sub>h</sub>   </td><td class="markdownTableBodyLeft">producer heartbeat time   </td><td class="markdownTableBodyLeft">uwIdx1017G    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">1018:01<sub>h</sub>   </td><td class="markdownTableBodyLeft">Identity Object, vendor-ID   </td><td class="markdownTableBodyLeft">ulIdx1018_1G   </td></tr>
</table>
<p>The array <code>atsObjDictReadG</code> holds the data elements to be read. Each entry has a pointer to an individual data storage location. Please note that the string size for the manufacturer device name (1008:00<sub>h</sub>) is limited to 32 byte. In case the manufacturer device name of the CANopen device exceeds this limit the data transfer will be aborted.</p>
 <div class="fragment"><div class="line"><a class="code hl_struct" href="structCoObject__s.html">CoObject_ts</a> atsObjDictReadG[] = {</div>
<div class="line">      { 0x1000, 0x00, 0x00,  4, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a9758fa6d412ffba727e400dca2554cb2">eCO_DT_UNSIGNED32</a>,       &amp;ulIdx1000G     },</div>
<div class="line">      { 0x1001, 0x00, 0x00,  1, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a84f83cb22e7eb77fd45917015e564f38">eCO_DT_UNSIGNED8</a>,        &amp;ubIdx1001G     },</div>
<div class="line">      { 0x1008, 0x00, 0x00, 32, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644affaf645197ae8648c30fc023a4dbc3f9">eCO_DT_VISIBLE_STRING</a>,   &amp;szIdx1008G     },</div>
<div class="line">      { 0x1017, 0x00, 0x00,  2, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a66b091d28416e854c3ddd9749e4ddffa">eCO_DT_UNSIGNED16</a>,       &amp;uwIdx1017G     },</div>
<div class="line">      { 0x1018, 0x01, 0x00,  4, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a9758fa6d412ffba727e400dca2554cb2">eCO_DT_UNSIGNED32</a>,       &amp;ulIdx1018_1G   }</div>
<div class="line">}; </div>
<div class="ttc" id="acanopen_8h_html_a220bbcaf7ba6907f0612a476f4c00644a66b091d28416e854c3ddd9749e4ddffa"><div class="ttname"><a href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a66b091d28416e854c3ddd9749e4ddffa">eCO_DT_UNSIGNED16</a></div><div class="ttdeci">@ eCO_DT_UNSIGNED16</div><div class="ttdef"><b>Definition</b> canopen.h:881</div></div>
<div class="ttc" id="acanopen_8h_html_a220bbcaf7ba6907f0612a476f4c00644a84f83cb22e7eb77fd45917015e564f38"><div class="ttname"><a href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a84f83cb22e7eb77fd45917015e564f38">eCO_DT_UNSIGNED8</a></div><div class="ttdeci">@ eCO_DT_UNSIGNED8</div><div class="ttdef"><b>Definition</b> canopen.h:876</div></div>
<div class="ttc" id="acanopen_8h_html_a220bbcaf7ba6907f0612a476f4c00644a9758fa6d412ffba727e400dca2554cb2"><div class="ttname"><a href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a9758fa6d412ffba727e400dca2554cb2">eCO_DT_UNSIGNED32</a></div><div class="ttdeci">@ eCO_DT_UNSIGNED32</div><div class="ttdef"><b>Definition</b> canopen.h:886</div></div>
<div class="ttc" id="acanopen_8h_html_a220bbcaf7ba6907f0612a476f4c00644affaf645197ae8648c30fc023a4dbc3f9"><div class="ttname"><a href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644affaf645197ae8648c30fc023a4dbc3f9">eCO_DT_VISIBLE_STRING</a></div><div class="ttdeci">@ eCO_DT_VISIBLE_STRING</div><div class="ttdef"><b>Definition</b> canopen.h:896</div></div>
</div><!-- fragment -->  <div class="fragment"><div class="line"><a class="code hl_typedef" href="com__defs_8h.html#adb338bd8ca45dd8a183241bf1f19b828">ComStatus_tv</a> ComDemoSdoObjectRead(uint8_t ubNetV, uint8_t ubNodeIdV)</div>
<div class="line">{</div>
<div class="line">   <a class="code hl_typedef" href="com__defs_8h.html#adb338bd8ca45dd8a183241bf1f19b828">ComStatus_tv</a>   tvStatusT;</div>
<div class="line">   uint8_t        ubSdoClientT;</div>
<div class="line"> </div>
<div class="line">   ubSdoClientT = <a class="code hl_function" href="com__sdo__cln_8h.html#a02255845fff0567a7493abde498935de">ComSdoGetClient</a>(ubNetV);</div>
<div class="line">   ulObjCntG = <span class="keyword">sizeof</span>(atsObjDictReadG) / <span class="keyword">sizeof</span> (<a class="code hl_struct" href="structCoObject__s.html">CoObject_ts</a>);</div>
<div class="line">   tvStatusT = <a class="code hl_function" href="com__sdo__cln_8h.html#ad236128dad193390fd141677563e8c78">ComSdoReadObject</a>( ubNetV, ubSdoClientT, ubNodeIdV, &amp;atsObjDictReadG[0], &amp;ulObjCntG);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span>(tvStatusT);</div>
<div class="line">}  </div>
<div class="ttc" id="acom__defs_8h_html_adb338bd8ca45dd8a183241bf1f19b828"><div class="ttname"><a href="com__defs_8h.html#adb338bd8ca45dd8a183241bf1f19b828">ComStatus_tv</a></div><div class="ttdeci">int32_t ComStatus_tv</div><div class="ttdoc">Function return value.</div><div class="ttdef"><b>Definition</b> com_defs.h:127</div></div>
<div class="ttc" id="acom__sdo__cln_8h_html_a02255845fff0567a7493abde498935de"><div class="ttname"><a href="com__sdo__cln_8h.html#a02255845fff0567a7493abde498935de">ComSdoGetClient</a></div><div class="ttdeci">uint8_t ComSdoGetClient(uint8_t ubNetV)</div></div>
<div class="ttc" id="acom__sdo__cln_8h_html_ad236128dad193390fd141677563e8c78"><div class="ttname"><a href="com__sdo__cln_8h.html#ad236128dad193390fd141677563e8c78">ComSdoReadObject</a></div><div class="ttdeci">ComStatus_tv ComSdoReadObject(uint8_t ubNetV, uint8_t ubClientV, uint8_t ubNodeIdV, CoObject_ts *ptsCoObjV, uint32_t *pulObjCntV)</div></div>
</div><!-- fragment --><p> In case of a timeout condition, the handler <a class="el" href="com__object_8h.html#a5fa7ac82fb8669a6669e3acd9d463294">ComObjectEventTimeout()</a> will be called. On success or in case of an communication abort the handler <a class="el" href="com__object_8h.html#a4dd28ba744c2946eeb804421ee3f49ba">ComObjectEventReady()</a> will be called.</p>
<h2>Object write operation</h2>
<p>The demo function <code>ComDemoSdoObjectWrite()</code> writes data to the following object dictionary entries:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Index / Sub-Index   </th><th class="markdownTableHeadLeft">Name   </th><th class="markdownTableHeadLeft">Local variable    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">1017:00<sub>h</sub>   </td><td class="markdownTableBodyLeft">producer heartbeat time   </td><td class="markdownTableBodyLeft">uwIdx1017G    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">1400:01<sub>h</sub>   </td><td class="markdownTableBodyLeft">RPDO1, identifier   </td><td class="markdownTableBodyLeft">ulIdx1400_1G    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">1400:02<sub>h</sub>   </td><td class="markdownTableBodyLeft">RPDO1, transmission type   </td><td class="markdownTableBodyLeft">ubIdx1400_2G    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">1800:01<sub>h</sub>   </td><td class="markdownTableBodyLeft">TPDO1, identifier   </td><td class="markdownTableBodyLeft">ulIdx1800_1G    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">1800:02<sub>h</sub>   </td><td class="markdownTableBodyLeft">TPDO1, transmission type   </td><td class="markdownTableBodyLeft">ubIdx1800_2G    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">1800:05<sub>h</sub>   </td><td class="markdownTableBodyLeft">TPDO1, event timer   </td><td class="markdownTableBodyLeft">uwIdx1800_5G   </td></tr>
</table>
<p>The array <code>atsObjDictWriteG</code> holds the data elements to be written. Each entry has a pointer to an individual data storage location. The values for each variable are set in the beginning of ComDemoSdoObjectWrite().</p>
 <div class="fragment"><div class="line"><a class="code hl_struct" href="structCoObject__s.html">CoObject_ts</a> atsObjDictWriteG[] = {</div>
<div class="line">      { 0x1017, 0x00, 0x00,  2, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a66b091d28416e854c3ddd9749e4ddffa">eCO_DT_UNSIGNED16</a>,       &amp;uwIdx1017G     },</div>
<div class="line">      { 0x1400, 0x01, 0x00,  4, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a9758fa6d412ffba727e400dca2554cb2">eCO_DT_UNSIGNED32</a>,       &amp;ulIdx1400_1G   },</div>
<div class="line">      { 0x1400, 0x02, 0x00,  1, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a84f83cb22e7eb77fd45917015e564f38">eCO_DT_UNSIGNED8</a>,        &amp;ubIdx1400_2G   },</div>
<div class="line">      { 0x1800, 0x01, 0x00,  4, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a9758fa6d412ffba727e400dca2554cb2">eCO_DT_UNSIGNED32</a>,       &amp;ulIdx1800_1G   },</div>
<div class="line">      { 0x1800, 0x02, 0x00,  1, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a84f83cb22e7eb77fd45917015e564f38">eCO_DT_UNSIGNED8</a>,        &amp;ubIdx1800_2G   },</div>
<div class="line">      { 0x1800, 0x05, 0x00,  2, <a class="code hl_enumvalue" href="canopen_8h.html#a220bbcaf7ba6907f0612a476f4c00644a66b091d28416e854c3ddd9749e4ddffa">eCO_DT_UNSIGNED16</a>,       &amp;uwIdx1800_5G   }</div>
<div class="line">};</div>
<div class="line"> </div>
</div><!-- fragment -->  <div class="fragment"><div class="line"><a class="code hl_typedef" href="com__defs_8h.html#adb338bd8ca45dd8a183241bf1f19b828">ComStatus_tv</a> ComDemoSdoObjectWrite(uint8_t ubNetV, uint8_t ubNodeIdV)</div>
<div class="line">{</div>
<div class="line">   <a class="code hl_typedef" href="com__defs_8h.html#adb338bd8ca45dd8a183241bf1f19b828">ComStatus_tv</a>   tvStatusT;</div>
<div class="line"> </div>
<div class="line">   uwIdx1017G   = 500;     <span class="comment">// set heartbeat value to 500 ms</span></div>
<div class="line">   ulIdx1400_1G = 0x211;   <span class="comment">// set RPDO identifier value to 211h</span></div>
<div class="line">   ubIdx1400_2G = 0xFF;    <span class="comment">// set RPDO transmission type to FFh (event)</span></div>
<div class="line">   ulIdx1800_1G = 0x191;   <span class="comment">// set TPDO identifier value to 191h</span></div>
<div class="line">   ubIdx1800_2G = 0xFF;    <span class="comment">// set TPDO transmission type to FFh (event)</span></div>
<div class="line">   uwIdx1800_5G = 100;;    <span class="comment">// set TPDO event timer to 100 ms</span></div>
<div class="line"> </div>
<div class="line">   ulObjCntG = <span class="keyword">sizeof</span>(atsObjDictWriteG) / <span class="keyword">sizeof</span> (<a class="code hl_struct" href="structCoObject__s.html">CoObject_ts</a>);</div>
<div class="line">   tvStatusT = <a class="code hl_function" href="com__sdo__cln_8h.html#a6423074db7425df687b65af5a55eeb29">ComSdoWriteObject</a>( ubNetV, 0, ubNodeIdV,  &amp;atsObjDictWriteG[0], &amp;ulObjCntG);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span>(tvStatusT);</div>
<div class="line">}  </div>
<div class="ttc" id="acom__sdo__cln_8h_html_a6423074db7425df687b65af5a55eeb29"><div class="ttname"><a href="com__sdo__cln_8h.html#a6423074db7425df687b65af5a55eeb29">ComSdoWriteObject</a></div><div class="ttdeci">ComStatus_tv ComSdoWriteObject(uint8_t ubNetV, uint8_t ubClientV, uint8_t ubNodeIdV, CoObject_ts *ptsCoObjV, uint32_t *pulObjCntV)</div></div>
</div><!-- fragment --></div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer"><a href="https://www.microcontrol.net">&copy; MicroControl GmbH &amp; Co. KG</a> Thu Jan 4 2024 </li>
  </ul>
</div>
</body>
</html>
